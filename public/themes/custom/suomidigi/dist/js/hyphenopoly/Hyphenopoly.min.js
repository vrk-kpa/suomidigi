/**
 * @license Hyphenopoly 4.0.0 - client side hyphenation for webbrowsers
 * ©2020  Mathias Nater, Güttingen (mathiasnater at gmail dot com)
 * https://github.com/mnater/Hyphenopoly
 *
 * Released under the MIT license
 * http://mnater.github.io/Hyphenopoly/LICENSE
 */
(e=>{"use strict";const n=String.fromCharCode(173);function t(){return Object.create(null)}function o(e,n){return{configurable:(4&n)>0,enumerable:(2&n)>0,writable:(1&n)>0,value:e}}(e=>{const r=Object.create(null,{defaultLanguage:o("en-us",2),dontHyphenate:o((()=>{const e=t();return"abbr,acronym,audio,br,button,code,img,input,kbd,label,math,option,pre,samp,script,style,sub,sup,svg,textarea,var,video".split(",").forEach((n=>{e[n]=!0})),e})(),2),dontHyphenateClass:o("donthyphenate",2),exceptions:o(t(),2),keepAlive:o(!0,2),normalize:o(!1,2),safeCopy:o(!0,2),timeout:o(1e3,2)}),a=Object.create(r),l=Object.create(null,{compound:o("hyphen",2),hyphen:o(n,2),leftmin:o(0,2),leftminPerLang:o(0,2),minWordLength:o(6,2),mixedCase:o(!0,2),orphanControl:o(1,2),rightmin:o(0,2),rightminPerLang:o(0,2)});Object.keys(e.setup).forEach((n=>{if("selectors"===n){const n=Object.keys(e.setup.selectors);Object.defineProperty(a,"selectors",o(n,2)),n.forEach((n=>{const r=t();Object.keys(e.setup.selectors[n]).forEach((t=>{r[t]=o(e.setup.selectors[n][t],2)})),Object.defineProperty(a,n,o(Object.create(l,r),2))}))}else if("dontHyphenate"===n){const l=t();Object.keys(e.setup.dontHyphenate).forEach((n=>{l[n]=o(e.setup.dontHyphenate[n],2)})),Object.defineProperty(a,n,o(Object.create(r.dontHyphenate,l),3))}else Object.defineProperty(a,n,o(e.setup[n],3))})),e.c=a})(Hyphenopoly),(n=>{n.events=new Map,n.createEventPromise=(e,t)=>{const o=n.defProm();n.events.set(e,o),t&&o.resolve(e)};const t=new Set(["afterElementHyphenation","beforeElementHyphenation","engineReady","error","hyphenopolyEnd","hyphenopolyStart"]);var o,r;n.createEventPromise("error"),n.events.get("error").then((e=>{e.runDefault=!0,e.preventDefault=()=>{e.runDefault=!1}})),n.handleEvent&&(o=n.handleEvent,r=e=>{t.has(e)?(n.events.has(e)||n.createEventPromise(e),n.events.get(e).then((t=>{n.handleEvent[e](t)}))):"tearDown"!==e&&"polyfill"!==e&&n.events.get("error").resolve({lvl:"warn",msg:`unknown Event "${e}" discarded`})},Object.keys(o).forEach(r)),n.events.get("error").then((n=>{if(n.runDefault)switch(n.lvl){case"info":e.console.info(n.msg);break;case"warn":e.console.warn(n.msg);break;default:e.console.error(n.msg)}}))})(Hyphenopoly),(r=>{const a=r.c;let l=null;function s(e){r.events.delete(e),r.createEventPromise(e),r.events.get(e).then((n=>{r.handleEvent[e](n)}))}function c(e,n){try{return e.getAttribute("lang")?e.getAttribute("lang").toLowerCase():"html"===e.tagName.toLowerCase()?n?l:null:c(e.parentNode,n)}catch(e){return null}}function h(){const t=function(){const e=new Map,n=[0];return{add:function(t,o,r){const a={element:t,selector:r};return e.has(o)||e.set(o,[]),e.get(o).push(a),n[0]+=1,a},counter:n,each:function(n){e.forEach(((e,t)=>{n(t,e)}))},list:e,rem:function(t){let o=0;e.has(t)&&(o=e.get(t).length,e.delete(t),n[0]-=o,0===n[0]&&(r.events.has("hyphenopolyEnd")&&r.events.get("hyphenopolyEnd").resolve("hyphenopolyEnd"),a.keepAlive||(window.Hyphenopoly=null)))}}}(),o=(()=>{let e="."+a.dontHyphenateClass,n=null;for(n in a.dontHyphenate)a.dontHyphenate[n]&&(e+=","+n);return e})(),l=a.selectors.join(",")+","+o;function s(o,h,i,p=!1){const g=function(e,n){return e.lang&&"string"==typeof e.lang?e.lang.toLowerCase():n&&""!==n?n.toLowerCase():c(e,!0)}(o,h);"H9Y"===r.cf.langs[g]?(t.add(o,g,i),!p&&a.safeCopy&&function(t){t.addEventListener("copy",(t=>{t.preventDefault();const o=e.getSelection(),r=o.getRangeAt(0).cloneContents(),a=document.createElement("div");a.appendChild(r);const l=a.innerHTML,s=o.toString();t.clipboardData.setData("text/plain",s.replace(new RegExp(n,"g"),"")),t.clipboardData.setData("text/html",l.replace(new RegExp(n,"g"),""))}),!0)}(o)):r.cf.langs[g]||r.events.get("error").resolve({lvl:"warn",msg:`Element with '${g}' found, but '${g}.hpb' not loaded. Check language tags!`}),o.childNodes.forEach((e=>{1!==e.nodeType||function(e,n){return e.matches||(e.matches=e.msMatchesSelector||e.webkitMatchesSelector),e.matches(n)}(e,l)||s(e,g,i,!0)}))}a.selectors.forEach((n=>{e.document.querySelectorAll(n).forEach((e=>{s(e,c(e,!0),n,!1)}))})),r.res.set("elements",Promise.resolve(t))}r.events.has("hyphenopolyStart")&&r.events.get("hyphenopolyStart").resolve("hyphenopolyStart");const i=new Map;function p(e,n,t){const o=a[t],l=o.hyphen;function s(a){let s=e.cache.get(t).get(a);var c;return!o.mixedCase&&(c=a,Array.prototype.map.call(c,(function(e){return e===e.toLowerCase()})).some((function(e,n,t){return e!==t[0]})))&&(s=a),s||(e.exceptions.has(a)?s=e.exceptions.get(a).replace(/-/g,o.hyphen):-1===a.indexOf("-")?a.length>61?(r.events.get("error").resolve({lvl:"warn",msg:"found word longer than 61 characters"}),s=a):s=e.hyphenateFunction(a,l.charCodeAt(0),o.leftminPerLang[n],o.rightminPerLang[n]):s=function(r){const a=String.fromCharCode(8203);let l=null,s=null;return"auto"===o.compound||"all"===o.compound?(s=p(e,n,t),l=r.split("-").map((e=>e.length>=o.minWordLength?s(e):e)),r="auto"===o.compound?l.join("-"):l.join("-"+a)):r=r.replace("-","-"+a),r}(a),e.cache.get(t).set(a,s)),s}return e.cache.set(t,new Map),i.set(n+"-"+t,s),s}const g=new Map;function u(e,n,t){const o=r.languages.get(e),l=a[n],c=l.minWordLength,h=a.normalize&&Boolean(String.prototype.normalize),u=e+"-"+n,m=i.has(u)?i.get(u):p(o,e,n),d=g.has(n)?g.get(n):function(e){function n(n,t,o,r){const l=a[e];let s=l.hyphen;return-1!==".\\+*?[^]$(){}=!<>|:-".indexOf(l.hyphen)&&(s="\\"+l.hyphen),3===l.orphanControl&&" "===t&&(t=String.fromCharCode(160)),t+o.replace(new RegExp(s,"g"),"")+r}return g.set(e,n),n}(n),f=o.genRegExps.get(n);function y(e){let n=null;return n=h?e.normalize("NFC").replace(f,m):e.replace(f,m),1!==l.orphanControl&&(n=n.replace(/(\u0020*)(\S+)(\s*)$/,d)),n}let v=null;var b;return"string"==typeof t?v=y(t):t instanceof HTMLElement&&(b=t,r.events.has("beforeElementHyphenation")&&(r.events.get("beforeElementHyphenation").resolve({el:b,lang:e}),s("beforeElementHyphenation")),b.childNodes.forEach((e=>{3===e.nodeType&&e.data.length>=c&&(e.data=y(e.data))})),r.res.get("elements").then((e=>{e.counter[0]-=1})),r.events.has("afterElementHyphenation")&&(r.events.get("afterElementHyphenation").resolve({el:b,lang:e}),s("afterElementHyphenation"))),v}function m(n,t){t?t.forEach((e=>{u(n,e.selector,e.element)})):r.events.get("error").resolve({lvl:"warn",msg:`engine for language '${n}' loaded, but no elements found.`}),r.res.get("elements").then((n=>{0===n.counter[0]&&(e.clearTimeout(a.timeOutHandler),0!==a.hide&&r.hiding(1,null),r.events.has("hyphenopolyEnd")&&r.events.get("hyphenopolyEnd").resolve("hyphenopolyEnd"),a.keepAlive||(window.Hyphenopoly=null))}))}function d(e,n,l,s,c){l=l.replace(/-/g,"");const h=function(e){return r.languages||(r.languages=new Map),r.languages.has(e)||r.languages.set(e,t()),r.languages.get(e)}(e);h.engineReady||(h.cache=new Map,a.exceptions.global&&(a.exceptions[e]?a.exceptions[e]+=", "+a.exceptions.global:a.exceptions[e]=a.exceptions.global),a.exceptions[e]?(h.exceptions=function(e){const n=new Map;return e.split(", ").forEach((e=>{const t=e.replace(/-/g,"");n.set(t,e)})),n}(a.exceptions[e]),delete a.exceptions[e]):h.exceptions=new Map,h.genRegExps=new Map,h.hyphenateFunction=n,a.selectors.forEach((n=>{const r=a[n];0===r.leftminPerLang&&Object.defineProperty(r,"leftminPerLang",o(t(),2)),0===r.rightminPerLang&&Object.defineProperty(r,"rightminPerLang",o(t(),2)),r.leftminPerLang[e]=Math.max(s,r.leftmin,Number(r.leftminPerLang[e])||0),r.rightminPerLang[e]=Math.max(c,r.rightmin,Number(r.rightminPerLang[e])||0),h.genRegExps.set(n,new RegExp(`[\\w${l}${String.fromCharCode(8204)}-]{${r.minWordLength},}`,"gi"))})),h.engineReady=!0,r.hyphenators[e].resolve(r.createHyphenator(e))),r.events.has("engineReady")&&r.events.get("engineReady").resolve(e),Promise.all([h,r.res.get("elements")]).then((n=>{m(e,n[1].list.get(e))}))}r.createHyphenator=e=>(n,t=".hyphenate")=>u(e,t,n),r.unhyphenate=()=>{r.res.get("elements").then((e=>{e.each(((e,n)=>{n.forEach((e=>{const n=e.element.firstChild,t=a[e.selector].hyphen;n.data=n.data.replace(new RegExp(t,"g"),"")}))}))}))};const f=(()=>{const e=new TextDecoder("utf-16le");return n=>e.decode(n)})();function y(e,n){const t=window.WebAssembly;function o(e){const o=e.instance.exports,r=o.conv(),a={buf:o.mem.buffer,hw:t.Global?o.hwo.value:o.hwo,lm:t.Global?o.lmi.value:o.lmi,rm:t.Global?o.rmi.value:o.rmi,wo:t.Global?o.uwo.value:o.uwo};d(n,function(e,n){const t=new Uint16Array(e.buf,e.wo,64),o=new Uint16Array(e.buf,e.hw,128);return t[0]=95,(e,r,a,l)=>{let s=0,c=e.charCodeAt(s);for(;c;)s+=1,t[s]=c,c=e.charCodeAt(s);return t[s+1]=95,t[s+2]=0,1===n(a,l,r)&&(e=f(o.subarray(1,o[0]+1))),e}}(a,o.hyphenate),f(new Uint16Array(o.mem.buffer,770,r-1)),a.lm,a.rm)}e.then((e=>{e.ok?t.instantiateStreaming&&"application/wasm"===e.headers.get("Content-Type")?t.instantiateStreaming(e).then(o):e.arrayBuffer().then((e=>{window.WebAssembly.instantiate(e).then(o)})):(r.res.get("elements").then((e=>{e.rem(n)})),r.hyphenators[n].catch((e=>{r.events.get("error").resolve({lvl:"warn",msg:e.msg})})),r.hyphenators[n].reject({lvl:"warn",msg:`1 File ${n}.wasm can't be loaded from ${r.paths.patterndir}`}))}))}r.res.get("DOM").then((()=>{l=c(e.document.documentElement,!1),l||""===a.defaultLanguage||(l=a.defaultLanguage),h(),r.res.get("elements").then((e=>{e.each(((e,n)=>{r.languages&&r.languages.has(e)&&r.languages.get(e).engineReady&&m(e,n)}))}))})),r.res.get("he").forEach(((e,n)=>{y(e,n)}))})(Hyphenopoly)})(window);