var Moby=function(e){Moby.instances++,this.breakpoint=void 0===e.breakpoint?1024:e.breakpoint,this.enableEscape=void 0===e.enableEscape||e.enableEscape,this.menu=void 0===e.menu?jQuery("#main-nav"):e.menu,this.menuClass=void 0===e.menuClass?"right-side":e.menuClass,this.mobyTrigger=void 0===e.mobyTrigger?jQuery("#moby-button"):e.mobyTrigger,this.onClose=void 0!==e.onClose&&e.onClose,this.onOpen=void 0!==e.onOpen&&e.onOpen,this.overlay=void 0===e.overlay||e.overlay,this.overlayClass=void 0===e.overlayClass?"dark":e.overlayClass,this.subMenuOpenIcon=void 0===e.subMenuOpenIcon?"<span>&#x25BC;</span>":e.subMenuOpenIcon,this.subMenuCloseIcon=void 0===e.subMenuCloseIcon?"<span>&#x25B2;</span>":e.subMenuCloseIcon,this.template=void 0!==e.template&&e.template,!0===this.overlay&&(jQuery("a.skip-link").after('<div class="moby-overlay '+this.overlayClass+'" id="moby-overlay'+Moby.instances+'"></div>'),this.overlaySelector=jQuery("body").find("#moby-overlay"+Moby.instances),this.overlaySelector.on("click",this.closeMoby.bind(this))),jQuery("a.skip-link").after('<div class="moby moby-hidden '+this.menuClass+'" id="moby'+Moby.instances+'"></div>'),this.mobySelector=jQuery("body").find("#moby"+Moby.instances),this.cloneMenu(),this.mobySelector.on("click",".moby-close",this.closeMoby.bind(this)),!0===this.enableEscape&&jQuery(document).on("keydown",function(e){27==e.keyCode&&this.closeMoby()}.bind(this)),this.mobyTrigger.on("click",this.openMoby.bind(this)),jQuery(window).on("resize",this.breakpointResize.bind(this)),this.mobySelector.on("click",".moby-expand",function(e){e.preventDefault(),e.stopPropagation(),this.mobyExpandSubMenu(jQuery(e.currentTarget))}.bind(this)),this.mobySelector.on("click","a",this.mobyPreventDummyLinks.bind(this))};Moby.instances=0,Moby.slideTransition=200,Moby.prototype.closeMoby=function(){var e=jQuery("body").find(".moby.moby-active");e.length>0&&(!0===this.overlay&&jQuery("body").find(".moby-overlay.moby-overlay-active").removeClass("moby-overlay-active"),e.removeClass("moby-active"),jQuery("body").removeClass("moby-body-fixed"),!1!==this.onClose&&this.onClose())},Moby.prototype.cloneMenu=function(){var e="",o=this.subMenuOpenIcon;if(!1===this.template?(e='<div class="moby-wrap">',e+='<div class="moby-close"><span class="moby-close-icon"></span> Close Menu</div>',e+='<div class="moby-menu"></div>',e+="</div>"):e=this.template,this.mobySelector.append(e),this.mobySelector.find(".moby-menu").length<1)return console.error("You must have a moby-menu class in your template!"),!1;this.menu.clone().appendTo(this.mobySelector.find(".moby-menu")),this.mobySelector.find(".moby-menu *[id]").removeAttr("id"),this.mobySelector.find(".moby-menu li").each((function(){jQuery(this).find("ul").length>0&&jQuery(this).find("> a").append("<span class='moby-expand'>"+o+"</span>")})),this.mobySelector.removeClass("moby-hidden")},Moby.prototype.openMoby=function(){this.mobySelector.addClass("moby-active"),jQuery("body").addClass("moby-body-fixed"),!0===this.overlay&&this.overlaySelector.addClass("moby-overlay-active"),!1!==this.onOpen&&this.onOpen()},Moby.prototype.breakpointResize=function(){var e=window.outerWidth;if(!1===this.breakpoint)return!1;e>=this.breakpoint&&this.mobySelector.hasClass("moby-active")&&this.closeMoby()},Moby.prototype.mobyExpandSubMenu=function(e){e.hasClass("moby-submenu-open")?(e.removeClass("moby-submenu-open"),e.html(this.subMenuOpenIcon),e.parents("li").first().find("> ul").slideUp(Moby.slideTransition)):(e.addClass("moby-submenu-open"),e.html(this.subMenuCloseIcon),e.parents("li").first().find("> ul").slideDown(Moby.slideTransition))},Moby.prototype.mobyPreventDummyLinks=function(e){var o=jQuery(this).find("> .moby-expand");"#"==jQuery(this).attr("href")&&(e.preventDefault(),o.length>0&&o.trigger("click"))};